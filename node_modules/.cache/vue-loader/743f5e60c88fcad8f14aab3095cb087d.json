{"remainingRequest":"E:\\learn\\复习\\vue\\myapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\learn\\复习\\vue\\myapp\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\learn\\复习\\vue\\myapp\\src\\views\\Home.vue","mtime":1573655141090},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgaG9tZWhlYWRlciBmcm9tICJAL2NvbXBvbmVudHMvSG9tZUhlYWRlci52dWUiOw0KaW1wb3J0IHtjYXRlZ29yeSxzbGlkZSxnZXRsaXN0fSBmcm9tICcuLi9hcGkvaG9tZScNCmltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4uL3N0b3JlL2FjdGlvbnMtdHlwZS5qcycNCg0KaW1wb3J0IHtjcmVhdGVOYW1lc3BhY2VkSGVscGVyc30gZnJvbSAndnVleCc7DQpsZXQge21hcFN0YXRlLG1hcEFjdGlvbnMsbWFwTXV0YXRpb25zfSA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKCdob21lJykNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTonaG9tZScsDQogICBhc3luYyBjcmVhdGVkKCl7DQogICAgIHRoaXMub2Zmc2V0SW5kZXg9MDsNCiAgICANCi8vICAgIGxldCByZXM9ICBhd2FpdCBjYXRlZ29yeSgpICANCi8vICAgIGNvbnNvbGUubG9nKHJlcykNCiAgIHRoaXNbdHlwZXMuR0VUX0NBVEVHT1JZXSgpDQogICBsZXQgcmVzPWF3YWl0IHNsaWRlKCk7DQogICANCiAgICAgdGhpcy5pdGVtcz1yZXMNCiAgICAgdGhpcy5zZXRmaWxtcygpDQogICANCiAgIA0KICAgIH0sDQogDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGl0ZW1zOiBbDQogICAgICBdLA0KICAgICAgc2l6ZTogNSwNCiAgICAgIG9mZnNldDogMTAwLA0KICAgICAgaGFzTW9yZTp0cnVlLA0KICAgICAvLyBzaXplOjMsDQogICAgICBtb3ZlbGlzdDpudWxsDQogICAgfTsNCiAgDQogIH0sDQogIGNvbXB1dGVkOnsNCiAgICAuLi5tYXBTdGF0ZShbJ2NhdGVnb3JpZXMnLCdzZWxlY3RJbmRleCddKQ0KICB9LA0KICBjb21wb25lbnRzOnsNCiAgICAgIGhvbWVoZWFkZXINCiAgfSwNCiAgbWV0aG9kczp7DQoNCiAgICAgIC4uLm1hcEFjdGlvbnMoW3R5cGVzLkdFVF9DQVRFR09SWV0pLA0KICAgICAgLi4ubWFwTXV0YXRpb25zKFt0eXBlcy5TRUxFQ1RfSU5ERVhdKSwNCiAgICAgIGNoYW5nZShpbmRleCl7DQogICAgICAgdGhpc1t0eXBlcy5TRUxFQ1RfSU5ERVhdKGluZGV4KQ0KICAgICAgIHRoaXMuaGFzTW9yZT10cnVlIC8v5b2T54K55Ye75LqG6I+c5Y2V77yM5oqKaGFzTW9yZee9ruS4unRydWUNCiAgICAgICB0aGlzLm9mZnNldEluZGV4PTA7DQogICAgICAgdGhpcy4kcmVmcy5saXN0LnJlc2V0KCkNCiAgICAgIH0sDQogICAgYXN5bmMgIHNldGZpbG1zKCl7DQogICAgICBsZXQgaW5kZXg9dGhpcy5zZWxlY3RJbmRleA0KICAgICAgICBpZih0aGlzLmhhc01vcmUpew0KICAgICAgICAgICAgbGV0IHJlcyA9YXdhaXQgZ2V0bGlzdChpbmRleCx0aGlzLm9mZnNldEluZGV4LHRoaXMuc2l6ZSkNCiAgICAgICAgICAgIGxldCB7cmVzdWx0LGhhc01vcmV9PXJlczsNCiAgICAgICAgICAgIHRoaXMuaGFzTW9yZT1oYXNNb3JlOw0KICAgICAgICAgICAgdGhpcy5vZmZzZXRJbmRleD10aGlzLm9mZnNldEluZGV4K3Jlc3VsdC5sZW5ndGg7DQogICAgICAgICANCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9LA0KICB9DQogIA0KfTsNCg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n      <!-- 头部 -->\r\n        <homeheader :categories=categories @change=change></homeheader>\r\n     <!-- 轮播图 -->\r\n     <cube-slide style=\"height:200px;width:100%;max-width:100%\" :data=\"items\"/>\r\n     \r\n      <div class=\"content\">\r\n        \r\n     <div class=\"view-wrapper\">\r\n  <cube-recycle-list class=\"list\" ref=\"list\" :size=\"size\" :on-fetch=\"setfilms\" :offset=\"offset\">\r\n    <template slot=\"item\" slot-scope=\"{ data }\">\r\n      <div :id=\"data.id\" class=\"item\" @click=\"handleClick(data)\">\r\n        <div class=\"avatar\" :style=\"{backgroundImage: 'url(' + (data.avatar || '') + ')'}\"></div>\r\n        <div class=\"bubble\">\r\n           <img :src=\"data.pic\" alt=\"\">\r\n          <div class=\"title\">\r\n            <p>{{ data.title }}</p>\r\n          <div>{{data.info}}</div>\r\n          </div>\r\n        </div>\r\n       \r\n      </div>\r\n    </template>\r\n  </cube-recycle-list>\r\n  \r\n  <div style=\"width:100%;text-align:center\" v-if='this.hasMore'>\r\n    <cube-loading style=\"margin-left:170px\" :size=\"28\" ></cube-loading>\r\n    <span >正在加载中</span>\r\n  </div>\r\n   \r\n</div>\r\n      </div>\r\n    </div>\r\n    \r\n</template>\r\n<script>\r\nimport homeheader from \"@/components/HomeHeader.vue\";\r\nimport {category,slide,getlist} from '../api/home'\r\nimport * as types from '../store/actions-type.js'\r\n\r\nimport {createNamespacedHelpers} from 'vuex';\r\nlet {mapState,mapActions,mapMutations} = createNamespacedHelpers('home')\r\nexport default {\r\n  name:'home',\r\n   async created(){\r\n     this.offsetIndex=0;\r\n    \r\n//    let res=  await category()  \r\n//    console.log(res)\r\n   this[types.GET_CATEGORY]()\r\n   let res=await slide();\r\n   \r\n     this.items=res\r\n     this.setfilms()\r\n   \r\n   \r\n    },\r\n \r\n  data() {\r\n    return {\r\n      items: [\r\n      ],\r\n      size: 5,\r\n      offset: 100,\r\n      hasMore:true,\r\n     // size:3,\r\n      movelist:null\r\n    };\r\n  \r\n  },\r\n  computed:{\r\n    ...mapState(['categories','selectIndex'])\r\n  },\r\n  components:{\r\n      homeheader\r\n  },\r\n  methods:{\r\n\r\n      ...mapActions([types.GET_CATEGORY]),\r\n      ...mapMutations([types.SELECT_INDEX]),\r\n      change(index){\r\n       this[types.SELECT_INDEX](index)\r\n       this.hasMore=true //当点击了菜单，把hasMore置为true\r\n       this.offsetIndex=0;\r\n       this.$refs.list.reset()\r\n      },\r\n    async  setfilms(){\r\n      let index=this.selectIndex\r\n        if(this.hasMore){\r\n            let res =await getlist(index,this.offsetIndex,this.size)\r\n            let {result,hasMore}=res;\r\n            this.hasMore=hasMore;\r\n            this.offsetIndex=this.offsetIndex+result.length;\r\n         \r\n            return result;\r\n        }else{\r\n          return false\r\n        }\r\n      },\r\n  }\r\n  \r\n};\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n\r\n  .content{\r\n     max-height: calc(100vh - 50px - 200px - 65px );\r\n     overflow scroll\r\n   \r\n  }\r\n  .bubble{\r\n    display flex\r\n    justify-content space-around\r\n    align-items center\r\n    margin-top 20px\r\n    img{\r\n      width 100px\r\n      height 150px\r\n\r\n    }\r\n    div{\r\n     font-weight fold \r\n     font-size 30px\r\n     line-height 40px\r\n    }\r\n\r\n  }\r\n</style>"]}]}