{"remainingRequest":"E:\\learn\\复习\\vue\\myapp\\node_modules\\babel-loader\\lib\\index.js??ref--29-1!E:\\learn\\复习\\vue\\myapp\\src\\utils\\ajaxRequest.js","dependencies":[{"path":"E:\\learn\\复习\\vue\\myapp\\src\\utils\\ajaxRequest.js","mtime":1573650169448},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRTpcXGxlYXJuXFxcdTU5MERcdTRFNjBcXHZ1ZVxcbXlhcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkU6XFxsZWFyblxcXHU1OTBEXHU0RTYwXFx2dWVcXG15YXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJFOlxcbGVhcm5cXFx1NTkwRFx1NEU2MFxcdnVlXFxteWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBUb2FzdCBmcm9tICJjdWJlLXVpL3NyYy9tb2R1bGVzL3RvYXN0IjsKCnZhciBhamF4UmVxdWVzdCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGFqYXhSZXF1ZXN0KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGFqYXhSZXF1ZXN0KTsKCiAgICB0aGlzLmJhc2VVUkwgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGknIDogInd3dy5iYWlkdS5jb20iOwogICAgdGhpcy50aW1lb3V0ID0gNTAwMDsKICAgIHRoaXMudG9hc3QgPSBUb2FzdC4kY3JlYXRlKHsKICAgICAgdHh0OiAnTG9hZGluZy4uLicsCiAgICAgIHRpbWU6IDAKICAgIH0pOwogICAgdGhpcy5xdWV1ZSA9IHt9OwogIH0KCiAgX2NyZWF0ZUNsYXNzKGFqYXhSZXF1ZXN0LCBbewogICAga2V5OiAibWVyZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlKG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgICAgICBiYXNlVVJMOiB0aGlzLmJhc2VVUkwsCiAgICAgICAgdGltZW91dDogdGhpcy50aW1lb3V0CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEludGVyY2VwdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRJbnRlcmNlcHRvcihpbnN0YWxsLCB1cmwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGluc3RhbGwuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICBpZiAoT2JqZWN0LmtleXMoX3RoaXMucXVldWUpLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICBfdGhpcy50b2FzdC5zaG93KCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5xdWV1ZVt1cmxdID09IHVybDsKICAgICAgICByZXR1cm4gY29uZmlnOwogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgICAgaW5zdGFsbC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGRlbGV0ZSBfdGhpcy5xdWV1ZVt1cmxdOwoKICAgICAgICBpZiAoT2JqZWN0LmtleXMoX3RoaXMucXVldWUpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgX3RoaXMudG9hc3QuaGlkZSgpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdChvcHRpb25zKSB7CiAgICAgIHZhciBpbnN0YWxsID0gYXhpb3MuY3JlYXRlKCk7CiAgICAgIHZhciBjb25maWcgPSB0aGlzLm1lcmdlKG9wdGlvbnMpOwogICAgICB0aGlzLnNldEludGVyY2VwdG9yKGluc3RhbGwsIG9wdGlvbnMudXJsKTsKICAgICAgcmV0dXJuIGluc3RhbGwoY29uZmlnKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBhamF4UmVxdWVzdDsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgbmV3IGFqYXhSZXF1ZXN0KCk7"},{"version":3,"sources":["E:/learn/复习/vue/myapp/src/utils/ajaxRequest.js"],"names":["axios","ajaxRequest","baseURL","process","env","NODE_ENV","timeout","toast","Toast","$create","txt","time","queue","options","install","url","interceptors","request","use","config","Object","keys","length","show","error","Promise","reject","response","hide","data","create","merge","setInterceptor"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;IAGMC,W;;;AACF,yBAAa;AAAA;;AACT,SAAKC,OAAL,GAAaC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAwB,YAAxB,GAAqC,2BAArC,GAAiE,eAA9E;AACA,SAAKC,OAAL,GAAa,IAAb;AACA,SAAKC,KAAL,GAAWC,KAAK,CAACC,OAAN,CAAc;AACrBC,MAAAA,GAAG,EAAC,YADiB;AAErBC,MAAAA,IAAI,EAAC;AAFgB,KAAd,CAAX;AAIA,SAAKC,KAAL,GAAW,EAAX;AACH;;;;0BACKC,O,EAAQ;AACV,+BAAUA,OAAV;AAAkBX,QAAAA,OAAO,EAAC,KAAKA,OAA/B;AAAuCI,QAAAA,OAAO,EAAC,KAAKA;AAApD;AAEH;;;mCACcQ,O,EAAQC,G,EAAI;AAAA;;AACvBD,MAAAA,OAAO,CAACE,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAACC,MAAD,EAAU;AACvC,YAAGC,MAAM,CAACC,IAAP,CAAY,KAAI,CAACT,KAAjB,EAAwBU,MAAxB,IAAgC,CAAnC,EAAqC;AACjC,UAAA,KAAI,CAACf,KAAL,CAAWgB,IAAX;AACH;;AACD,QAAA,KAAI,CAACX,KAAL,CAAWG,GAAX,KAAiBA,GAAjB;AAEI,eAAOI,MAAP;AAEP,OARD,EAQE,UAAAK,KAAK,EAAE;AACL,eAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,OAVD;AAWAV,MAAAA,OAAO,CAACE,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B,CAAkC,UAACS,QAAD,EAAY;AAC1C,eAAO,KAAI,CAACf,KAAL,CAAWG,GAAX,CAAP;;AACA,YAAGK,MAAM,CAACC,IAAP,CAAY,KAAI,CAACT,KAAjB,EAAwBU,MAAxB,KAAiC,CAApC,EAAsC;AAClC,UAAA,KAAI,CAACf,KAAL,CAAWqB,IAAX;AACH;;AACD,eAAOD,QAAQ,CAACE,IAAT,CAAcA,IAArB;AACH,OAND,EAME,UAAAL,KAAK,EAAE;AACL,eAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,OARD;AASH;;;4BACOX,O,EAAQ;AAEZ,UAAIC,OAAO,GAACd,KAAK,CAAC8B,MAAN,EAAZ;AACA,UAAIX,MAAM,GAAC,KAAKY,KAAL,CAAWlB,OAAX,CAAX;AACA,WAAKmB,cAAL,CAAoBlB,OAApB,EAA4BD,OAAO,CAACE,GAApC;AACA,aAAOD,OAAO,CAACK,MAAD,CAAd;AACH;;;;;;AAGL,eAAe,IAAIlB,WAAJ,EAAf","sourcesContent":["import axios from 'axios'\r\nimport{Toast} from 'cube-ui'\r\n\r\nclass ajaxRequest{\r\n    constructor(){\r\n        this.baseURL=process.env.NODE_ENV !=='production'?'http://localhost:3000/api':\"www.baidu.com\"\r\n        this.timeout=5000;\r\n        this.toast=Toast.$create({\r\n            txt:'Loading...',\r\n            time:0\r\n        })\r\n        this.queue={}\r\n    }\r\n    merge(options){\r\n        return{...options,baseURL:this.baseURL,timeout:this.timeout}\r\n\r\n    }\r\n    setInterceptor(install,url){\r\n        install.interceptors.request.use((config)=>{\r\n            if(Object.keys(this.queue).length==0){\r\n                this.toast.show()\r\n            }\r\n            this.queue[url]==url;\r\n                \r\n                return config\r\n           \r\n        },error=>{\r\n            return Promise.reject(error)\r\n        })\r\n        install.interceptors.response.use((response)=>{\r\n            delete this.queue[url]\r\n            if(Object.keys(this.queue).length===0){\r\n                this.toast.hide()\r\n            }\r\n            return response.data.data\r\n        },error=>{\r\n            return Promise.reject(error)\r\n        })\r\n    }\r\n    request(options){\r\n      \r\n        let install=axios.create();\r\n        let config=this.merge(options)\r\n        this.setInterceptor(install,options.url)\r\n        return install(config)\r\n    }\r\n}\r\n\r\nexport default new ajaxRequest()"]}]}