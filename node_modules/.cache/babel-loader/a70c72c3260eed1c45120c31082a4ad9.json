{"remainingRequest":"E:\\learn\\复习\\vue\\myapp\\node_modules\\thread-loader\\dist\\cjs.js!E:\\learn\\复习\\vue\\myapp\\node_modules\\babel-loader\\lib\\index.js??ref--16-2!E:\\learn\\复习\\vue\\myapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\learn\\复习\\vue\\myapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\learn\\复习\\vue\\myapp\\node_modules\\cube-ui\\src\\components\\upload\\upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\cube-ui\\src\\components\\upload\\upload.vue","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\复习\\vue\\myapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBVcGxvYWRCdG4gZnJvbSAiLi9idG4udnVlIjsKaW1wb3J0IFVwbG9hZEZpbGUgZnJvbSAiLi9maWxlLnZ1ZSI7CmltcG9ydCBhamF4VXBsb2FkIGZyb20gIi4vYWpheCI7CmltcG9ydCBidG5NaXhpbiBmcm9tICIuL2J0bi1taXhpbiI7CmltcG9ydCB7IHByb2Nlc3NGaWxlcywgbmV3RmlsZSwgVVJMLCBTVEFUVVNfUkVBRFksIFNUQVRVU19VUExPQURJTkcsIFNUQVRVU19FUlJPUiwgU1RBVFVTX1NVQ0NFU1MgfSBmcm9tICIuL3V0aWwiOwp2YXIgQ09NUE9ORU5UX05BTUUgPSAnY3ViZS11cGxvYWQnOwp2YXIgRVZFTlRfSU5QVVQgPSAnaW5wdXQnOwp2YXIgRVZFTlRfQURERUQgPSAnZmlsZXMtYWRkZWQnOwp2YXIgRVZFTlRfU1VCTUlUVEVEID0gJ2ZpbGUtc3VibWl0dGVkJzsKdmFyIEVWRU5UX1JFTU9WRUQgPSAnZmlsZS1yZW1vdmVkJzsKdmFyIEVWRU5UX1NVQ0NFU1MgPSAnZmlsZS1zdWNjZXNzJzsKdmFyIEVWRU5UX0VSUk9SID0gJ2ZpbGUtZXJyb3InOwp2YXIgRVZFTlRfQ0xJQ0sgPSAnZmlsZS1jbGljayc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiBDT01QT05FTlRfTkFNRSwKICBtaXhpbnM6IFtidG5NaXhpbl0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBhY3Rpb246IHsKICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0XSwKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBtYXg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxMAogICAgfSwKICAgIGF1dG86IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHNpbXVsdGFuZW91c1VwbG9hZHM6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9LAogICAgcHJvY2Vzc0ZpbGU6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KGZpbGUsIGNiKSB7CiAgICAgICAgY2IoZmlsZSk7CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlczogdGhpcy52YWx1ZSwKICAgICAgcGF1c2VkOiAhdGhpcy5hdXRvCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGFjdGlvbk9wdGlvbnM6IGZ1bmN0aW9uIGFjdGlvbk9wdGlvbnMoKSB7CiAgICAgIHZhciBhY3Rpb24gPSB0aGlzLmFjdGlvbjsKCiAgICAgIGlmICh0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBhY3Rpb24gPyB7CiAgICAgICAgICB0YXJnZXQ6IGFjdGlvbgogICAgICAgIH0gOiBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBhY3Rpb247CiAgICAgIH0KICAgIH0sCiAgICBpc1Nob3dCdG46IGZ1bmN0aW9uIGlzU2hvd0J0bigpIHsKICAgICAgcmV0dXJuIHRoaXMuZmlsZXMubGVuZ3RoIDwgdGhpcy5tYXg7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG5ld1ZhbCkgewogICAgICB0aGlzLmZpbGVzID0gbmV3VmFsOwogICAgfSwKICAgIGZpbGVzOiBmdW5jdGlvbiBmaWxlcyhuZXdGaWxlcykgewogICAgICB0aGlzLiRlbWl0KEVWRU5UX0lOUFVULCBuZXdGaWxlcyk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRGaWxlczogZnVuY3Rpb24gYWRkRmlsZXMoZmlsZXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGVtaXQoRVZFTlRfQURERUQsIGZpbGVzKTsKICAgICAgdmFyIGZpbGVzTGVuID0gdGhpcy5maWxlcy5sZW5ndGg7CiAgICAgIHZhciBuZXdGaWxlcyA9IFtdOwogICAgICB2YXIgbWF4TGVuID0gdGhpcy5tYXggLSBmaWxlc0xlbjsKICAgICAgdmFyIGkgPSAwOwogICAgICB2YXIgZmlsZSA9IGZpbGVzW2ldOwoKICAgICAgd2hpbGUgKG5ld0ZpbGVzLmxlbmd0aCA8IG1heExlbiAmJiBmaWxlKSB7CiAgICAgICAgaWYgKCFmaWxlLmlnbm9yZSkgewogICAgICAgICAgbmV3RmlsZXMucHVzaChmaWxlKTsKICAgICAgICAgIHRoaXMuZmlsZXMucHVzaChuZXdGaWxlKCkpOwogICAgICAgIH0KCiAgICAgICAgZmlsZSA9IGZpbGVzWysraV07CiAgICAgIH0KCiAgICAgIHByb2Nlc3NGaWxlcyhuZXdGaWxlcywgdGhpcy5wcm9jZXNzRmlsZSwgZnVuY3Rpb24gKGZpbGUsIGluZGV4KSB7CiAgICAgICAgX3RoaXMuJHNldChfdGhpcy5maWxlcywgZmlsZXNMZW4gKyBpbmRleCwgZmlsZSk7CgogICAgICAgIF90aGlzLiRlbWl0KEVWRU5UX1NVQk1JVFRFRCwgZmlsZSk7CiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyB3YWl0aW5nIHVpCiAgICAgICAgX3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLnVwbG9hZCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVGaWxlOiBmdW5jdGlvbiByZW1vdmVGaWxlKGZpbGUpIHsKICAgICAgdGhpcy4kZW1pdChFVkVOVF9SRU1PVkVELCBmaWxlKTsKICAgICAgZmlsZS5feGhyICYmIGZpbGUuX3hoci5hYm9ydCgpOwoKICAgICAgaWYgKGZpbGUudXJsKSB7CiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChmaWxlLnVybCk7CiAgICAgIH0KCiAgICAgIHZhciBpbmRleCA9IHRoaXMuZmlsZXMuaW5kZXhPZihmaWxlKTsKICAgICAgdGhpcy5maWxlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnVwbG9hZCgpOwogICAgfSwKICAgIGZpbGVDbGljazogZnVuY3Rpb24gZmlsZUNsaWNrKGZpbGUpIHsKICAgICAgdGhpcy4kZW1pdChFVkVOVF9DTElDSywgZmlsZSk7CiAgICB9LAogICAgdXBsb2FkOiBmdW5jdGlvbiB1cGxvYWQocmV0cnkpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuYWN0aW9uT3B0aW9uczsKCiAgICAgIGlmICh0aGlzLnBhdXNlZCB8fCAhb3B0aW9ucykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGxlbiA9IHRoaXMuZmlsZXMubGVuZ3RoOwogICAgICB2YXIgdXBsb2FkaW5nQ291bnQgPSAwOwogICAgICB2YXIgaSA9IDA7CgogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHsKICAgICAgICB2YXIgZmlsZSA9IF90aGlzMi5maWxlc1tpXTsKICAgICAgICB2YXIgc3RhdHVzID0gZmlsZS5zdGF0dXM7CgogICAgICAgIGlmIChzdGF0dXMgPT09IFNUQVRVU19SRUFEWSB8fCByZXRyeSAmJiBzdGF0dXMgPT09IFNUQVRVU19FUlJPUiAmJiBmaWxlLl9yZXRyeUlkICE9PSBfdGhpczIucmV0cnlJZCkgewogICAgICAgICAgYWpheFVwbG9hZChmaWxlLCBvcHRpb25zLCBmdW5jdGlvbiAoZmlsZSkgewogICAgICAgICAgICBpZiAoc3RhdHVzID09PSBTVEFUVVNfRVJST1IpIHsKICAgICAgICAgICAgICBmaWxlLl9yZXRyeUlkID0gX3RoaXMyLnJldHJ5SWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzMi4kZW1pdChmaWxlLnN0YXR1cyA9PT0gU1RBVFVTX1NVQ0NFU1MgPyBFVkVOVF9TVUNDRVNTIDogRVZFTlRfRVJST1IsIGZpbGUpOwoKICAgICAgICAgICAgX3RoaXMyLnVwbG9hZChyZXRyeSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHVwbG9hZGluZ0NvdW50Kys7CiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFNUQVRVU19VUExPQURJTkcpIHsKICAgICAgICAgIHVwbG9hZGluZ0NvdW50Kys7CiAgICAgICAgfQoKICAgICAgICBpKys7CiAgICAgIH07CgogICAgICB3aGlsZSAoaSA8IGxlbiAmJiB1cGxvYWRpbmdDb3VudCA8IHRoaXMuc2ltdWx0YW5lb3VzVXBsb2FkcykgewogICAgICAgIF9sb29wKCk7CiAgICAgIH0KICAgIH0sCiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7CiAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7CiAgICAgIHRoaXMudXBsb2FkKCk7CiAgICB9LAogICAgcGF1c2U6IGZ1bmN0aW9uIHBhdXNlKCkgewogICAgICB0aGlzLnBhdXNlZCA9IHRydWU7CiAgICAgIHRoaXMuZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgewogICAgICAgIGlmIChmaWxlLnN0YXR1cyA9PT0gU1RBVFVTX1VQTE9BRElORykgewogICAgICAgICAgZmlsZS5feGhyLmFib3J0KCk7CgogICAgICAgICAgZmlsZS5zdGF0dXMgPSBTVEFUVVNfUkVBRFk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXRyeTogZnVuY3Rpb24gcmV0cnkoKSB7CiAgICAgIHRoaXMucmV0cnlJZCA9IERhdGUubm93KCk7CiAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7CiAgICAgIHRoaXMudXBsb2FkKHRydWUpOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgVXBsb2FkQnRuOiBVcGxvYWRCdG4sCiAgICBVcGxvYWRGaWxlOiBVcGxvYWRGaWxlCiAgfQp9Ow=="},{"version":3,"sources":["upload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cube-upload\">\n    <slot>\n      <div class=\"cube-upload-def clear-fix\">\n        <upload-file v-for=\"(file, i) in files\" :file=\"file\" :key=\"i\" @click=\"fileClick\"></upload-file>\n        <upload-btn :multiple=\"multiple\" :accept=\"accept\" v-show=\"isShowBtn\"></upload-btn>\n      </div>\n    </slot>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\n  import UploadBtn from './btn.vue'\n  import UploadFile from './file.vue'\n  import ajaxUpload from './ajax'\n  import btnMixin from './btn-mixin'\n  import {\n    processFiles,\n    newFile,\n    URL,\n    STATUS_READY,\n    STATUS_UPLOADING,\n    STATUS_ERROR,\n    STATUS_SUCCESS\n  } from './util'\n\n  const COMPONENT_NAME = 'cube-upload'\n  const EVENT_INPUT = 'input'\n  const EVENT_ADDED = 'files-added'\n  const EVENT_SUBMITTED = 'file-submitted'\n  const EVENT_REMOVED = 'file-removed'\n  const EVENT_SUCCESS = 'file-success'\n  const EVENT_ERROR = 'file-error'\n  const EVENT_CLICK = 'file-click'\n\n  export default {\n    name: COMPONENT_NAME,\n    mixins: [btnMixin],\n    props: {\n      value: {\n        type: Array,\n        default() {\n          return []\n        }\n      },\n      action: {\n        type: [String, Object],\n        default: ''\n      },\n      max: {\n        type: Number,\n        default: 10\n      },\n      auto: {\n        type: Boolean,\n        default: true\n      },\n      simultaneousUploads: {\n        type: Number,\n        default: 1\n      },\n      processFile: {\n        type: Function,\n        default: function (file, cb) {\n          cb(file)\n        }\n      }\n    },\n    data() {\n      return {\n        files: this.value,\n        paused: !this.auto\n      }\n    },\n    computed: {\n      actionOptions() {\n        const action = this.action\n        if (typeof action === 'string') {\n          return action ? {\n            target: action\n          } : null\n        } else {\n          return action\n        }\n      },\n      isShowBtn() {\n        return this.files.length < this.max\n      }\n    },\n    watch: {\n      value(newVal) {\n        this.files = newVal\n      },\n      files(newFiles) {\n        this.$emit(EVENT_INPUT, newFiles)\n      }\n    },\n    methods: {\n      addFiles(files) {\n        this.$emit(EVENT_ADDED, files)\n        const filesLen = this.files.length\n        const newFiles = []\n        const maxLen = this.max - filesLen\n        let i = 0\n        let file = files[i]\n        while (newFiles.length < maxLen && file) {\n          if (!file.ignore) {\n            newFiles.push(file)\n            this.files.push(newFile())\n          }\n          file = files[++i]\n        }\n        processFiles(newFiles, this.processFile, (file, index) => {\n          this.$set(this.files, filesLen + index, file)\n          this.$emit(EVENT_SUBMITTED, file)\n        }, () => {\n          // waiting ui\n          this.$nextTick(() => {\n            this.upload()\n          })\n        })\n      },\n      removeFile(file) {\n        this.$emit(EVENT_REMOVED, file)\n        file._xhr && file._xhr.abort()\n        if (file.url) {\n          URL.revokeObjectURL(file.url)\n        }\n        const index = this.files.indexOf(file)\n        this.files.splice(index, 1)\n        this.upload()\n      },\n      fileClick(file) {\n        this.$emit(EVENT_CLICK, file)\n      },\n      upload(retry) {\n        const options = this.actionOptions\n        if (this.paused || !options) {\n          return\n        }\n        const len = this.files.length\n        let uploadingCount = 0\n        let i = 0\n        while (i < len && uploadingCount < this.simultaneousUploads) {\n          const file = this.files[i]\n          const status = file.status\n          if (status === STATUS_READY || (retry && status === STATUS_ERROR && file._retryId !== this.retryId)) {\n            ajaxUpload(file, options, (file) => {\n              if (status === STATUS_ERROR) {\n                file._retryId = this.retryId\n              }\n              this.$emit(file.status === STATUS_SUCCESS ? EVENT_SUCCESS : EVENT_ERROR, file)\n              this.upload(retry)\n            })\n            uploadingCount++\n          } else if (status === STATUS_UPLOADING) {\n            uploadingCount++\n          }\n          i++\n        }\n      },\n      start() {\n        this.paused = false\n        this.upload()\n      },\n      pause() {\n        this.paused = true\n        this.files.forEach((file) => {\n          if (file.status === STATUS_UPLOADING) {\n            file._xhr.abort()\n            file.status = STATUS_READY\n          }\n        })\n      },\n      retry() {\n        this.retryId = Date.now()\n        this.paused = false\n        this.upload(true)\n      }\n    },\n    components: {\n      UploadBtn,\n      UploadFile\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @require \"../../common/stylus/variable.styl\"\n  .cube-upload\n    position: relative\n\n  .cube-upload-def\n    margin-right: -10px\n    .cube-upload-btn, .cube-upload-file\n      float: left\n      margin: 0 10px 10px 0\n</style>\n"],"sourceRoot":"node_modules/cube-ui/src/components/upload"}]}